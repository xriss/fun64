<html>
	<head>
		<title>Welcome to docs!</title>
		<link rel='stylesheet' href='../../docs/docs.css' />
	</head>
	<body><div style="width:90%;margin:auto;min-width:960px;"><div style="width:30%;display:inline-block;min-width:320px;vertical-align:top;">

	<div style="margin:64px 0px;">
	<a style="display:block;" href="../../docs">/</a>
	<a style="display:block;" href="../../docs/lua">/lua</a><a style="display:block;" href="../../docs/lua.wetgenes">/lua.wetgenes</a><a style="display:block;" href="../../docs/lua.wetgenes.gamecake">/lua.wetgenes.gamecake</a><a style="display:block;" href="../../docs/lua.wetgenes.gamecake.fun">/lua.wetgenes.gamecake.fun</a><a style="display:block;" href="../../docs/lua.wetgenes.gamecake.fun.chatdown">/lua.wetgenes.gamecake.fun.chatdown</a><a style="display:block;" href="../../docs/lua.wetgenes.gamecake.fun.chatdown.chat">/lua.wetgenes.gamecake.fun.chatdown.chat</a><a style="display:block;" href="../../docs/lua.wetgenes.gamecake.fun.chatdown.chats">/lua.wetgenes.gamecake.fun.chatdown.chats</a><a style="display:block;" href="../../docs/lua.wetgenes.gamecake.fun.entities">/lua.wetgenes.gamecake.fun.entities</a><a style="display:block;" href="../../docs/lua.wetgenes.gamecake.fun.entities.systems">/lua.wetgenes.gamecake.fun.entities.systems</a><a style="display:block;" href="../../docs/lua.wetgenes.gamecake.fun.yarn">/lua.wetgenes.gamecake.fun.yarn</a><a style="display:block;" href="../../docs/lua.wetgenes.gamecake.fun.yarn.items">/lua.wetgenes.gamecake.fun.yarn.items</a><a style="display:block;" href="../../docs/lua.wetgenes.gamecake.fun.yarn.prefabs">/lua.wetgenes.gamecake.fun.yarn.prefabs</a><a style="display:block;" href="../../docs/lua.wetgenes.gamecake.fun.yarn.rules">/lua.wetgenes.gamecake.fun.yarn.rules</a>
	</div>

</div><div style="width:60%;display:inline-block;min-width:640px;">

	
<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities">lua.wetgenes.gamecake.fun.entities</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L7">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>fun_entities = require(&quot;wetgenes.gamecake.fun.entities&quot;)</code></pre><p>Manage a simple structure to help group, update and draw discrete game 
objects.</p>
<p>This module contains only one function which can be used to create an 
entities instance and the rest of this documentation concerns the 
return from this create function, not the module</p>
<pre><code>entities = fun_entities.create()
entities = fun_entities.create( { sortby={&quot;first&quot;,&quot;second&quot;,...} } )</code></pre><p>Create and return an entities object. A base object can be passed in 
and will be filled in and returned. This can used to supply a sortby 
table to help control the order of updates of different castes.</p>
<p>If passed in sortby is a table of [caste_name]=weight values to help 
control the order of updates by caste and make it consistent. For 
instance you might find it useful to force monsters to update before 
the player.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.add">lua.wetgenes.gamecake.fun.entities.add</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L281">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>entities.add(it,caste)
entities.add(it)</code></pre><p>Add a new entity of caste or it.caste to the list of things to update.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.call">lua.wetgenes.gamecake.fun.entities.call</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L332">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>entities.call(fname,...)</code></pre><p>If fname is a string then that method will be invoked for every item 
where it exists like so.</p>
<pre><code>if it[fname] then it[fname](it,...) end</code></pre><p>if fname is a function then it will result in every item geting 
called with that function like so.</p>
<pre><code>fname(it,...)</code></pre><p>The calls are always made backwards through the table so that an item 
can choose to delete itself.</p>
<p>Finally we return the number of calls we made so you can keep track of 
currently active items.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.caste">lua.wetgenes.gamecake.fun.entities.caste</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L253">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>entities.caste(caste)</code></pre><p>Get the list of entities of a given caste, eg &quot;bullets&quot; or &quot;enemies&quot;</p>
<p>This list will be created if it does not already exist.</p>
<p>entities.sortby is used to keep this list in order.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.find_uid">lua.wetgenes.gamecake.fun.entities.find_uid</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L125">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>local it = entities.find_uid( uid )</code></pre><p>Return the item with the given uid or nil if no such item has been 
remembered.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.forget_uid">lua.wetgenes.gamecake.fun.entities.forget_uid</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L103">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>local it = entities.forget_uid( {uid=uid} )</code></pre><p>Remove the item from the map of uids. Returns the item or nil if uid 
was invalid unset or our map was not pointing to the correct item.</p>
<pre><code>local it = entities.forget_uid( entities.find_uid( uid ) )</code></pre><p>Chain with find_uid to forget an item by uid and this is safe even if the 
item does not exist.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.generate_uid">lua.wetgenes.gamecake.fun.entities.generate_uid</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L62">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>local uid = entities.generate_uid()</code></pre><p>Create a &quot;reasonably&quot; unique id number and return it. we are only 
expecting uniqueness within this program but we will probably be OK 
with other ids provided they are not generated by a program starting at 
exactly the same time. These are very simple time based uids that offer 
no security.</p>
<p>The point of uids is so we can refer to and lazy link items as weak 
values making it easy to delete an item without worrying too much about 
where it has been used. So instead of putting the item table inside 
another item table we can use a uid reference instead.</p>
<p>Good for serialising data as well.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.get">lua.wetgenes.gamecake.fun.entities.get</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L381">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>entities.get(name)</code></pre><p>get a value previously saved, this is an easy way to find a unique 
entity, eg the global space but it can be used to save any values you 
wish not just to bookmark unique entities.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.manifest">lua.wetgenes.gamecake.fun.entities.manifest</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L410">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>entities.manifest(name,value)</code></pre><p>get a value previously saved, or initalize it to the given value if it 
does not already exist. The default value is {} as this is intended for 
lists.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.remember_uid">lua.wetgenes.gamecake.fun.entities.remember_uid</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L87">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>local it = entities.remember_uid( {} )</code></pre><p>Remember an item in the uids table, generating a uid and setting it.uid 
to this value if one does not already exist.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.remove">lua.wetgenes.gamecake.fun.entities.remove</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L301">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>entities.remove(it)</code></pre><p>Remove this entity, this is slightly expensive as we need to search in 
a table to find it before calling table.remove which then has to 
shuffle the table to fill in the hole.</p>
<p>With very dynamic items it can be faster to allocate all the items you 
need at the start and then flag them on/off rather than add and remove 
dynamically.</p>
<p>It may make more sense to create an entity which handles its own list 
of objects, such as particles. Then only use the entity system to keep 
track of a master particles item that contains many particles and can 
add/remove/recycle as it sees fit.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.reset">lua.wetgenes.gamecake.fun.entities.reset</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L235">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>entities.reset()</code></pre><p>Empty the list of entities to update and draw, this does not reset the 
systems table that should be modified with the insert and remove 
functions.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.set">lua.wetgenes.gamecake.fun.entities.set</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L396">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>entities.set(name,value)</code></pre><p>save a value by a unique name</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.sortby_update">lua.wetgenes.gamecake.fun.entities.sortby_update</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L218">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>entities.sortby_update()</code></pre><p>A function that takes the array part of entities.sortby and reverses 
the key=value so a simple order list can be provided without any 
explicit weights. The first caste name in the array gets a weight of 1, 
second 2 and so on.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.systems">lua.wetgenes.gamecake.fun.entities.systems</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L37">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>entities.systems={name=system,[1]=system}</code></pre><p>A sorted table and lookup by caste name of each system. Table is sorted 
so it will be traversed backwards, backwards traversal allows the 
current item to delete itself.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.systems.call">lua.wetgenes.gamecake.fun.entities.systems.call</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L189">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>entities.systems.call(fname,...)</code></pre><p>For every system call the function called fname like so.</p>
<pre><code>system[fname](system,...)</code></pre><p>Returns the number of calls made, which will be the number of systems 
that had an fname function to call.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.systems.insert">lua.wetgenes.gamecake.fun.entities.systems.insert</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L157">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>entities.systems.insert(system)</code></pre><p>Insert a new system replacing any system of the same caste. 
system.caste should be set to the caste of the system for this to work. 
As we also keep some functions in this table, the names &quot;insert&quot;, 
&quot;remove&quot; and &quot;call&quot; are not available as caste names.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.systems.remove">lua.wetgenes.gamecake.fun.entities.systems.remove</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L139">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>system = entities.systems.remove(caste)</code></pre><p>Remove and return the system of the given caste.</p>
</div>
</div>

<div style="margin:64px 0px;">
<h1><a href="../../docs/lua.wetgenes.gamecake.fun.entities.uids">lua.wetgenes.gamecake.fun.entities.uids</a></h1>
<div><a href="https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua#L50">https://github.com/xriss/gamecake/blob/master/lua/wetgenes/gamecake/fun/entities.lua</a></div>
<div><pre><code>entities.uids={[uid]=item,...}</code></pre><p>A map of currently remembered uids to items.</p>
</div>
</div>


</div></div>
</body>
</html>
